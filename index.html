<!DOCTYPE html>
<!--
 This file is part of the ros_webconsole package (https://github.com/rbonghi/ros_webconsole or http://rnext.it).
 Copyright (c) 2019 Raffaello Bonghi.
 
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 
 You should have received a copy of the GNU Affero General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- jQuery Mobile online -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <!-- jQuery Mobile offline -->
  <!--<link href="jquery/jquery.mobile-1.4.5.min.css" rel="stylesheet" />
  <script src="jquery/jquery-2.1.0.js"></script>
  <script src="jquery/jquery.mobile-1.4.5.min.js"></script>-->
  <!-- ROS libs online -->
  <script type="text/javascript" src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.js"></script>
  <script type="text/javascript" src="https://static.robotwebtools.org/roslibjs/current/roslib.js"></script>
  <script type="text/javascript" src="https://static.robotwebtools.org/ros3djs/current/ros3d.js"></script>
  
  <!-- Load page controller -->
  <script type="text/javascript" src="js/pages.js"></script>
  <script type="text/javascript" src="js/ros_controller.js"></script>
  <script type="text/javascript" src="js/Viewer.js"></script>

  <script type="text/javascript">
    // Run the document only when de DOM is ready and the callback with the json file in loaded
    // reference:
    // https://demos.jquerymobile.com/1.2.1/docs/api/events.html
    $(document).on("pageinit", function() {
        pages.loadconfig("config.json", function(json) {
            // Build Navigation bar menu
            json.pages = (('pages' in json) ? json.pages : {});
            pages.controller(json.pages);
            // Initialize ros controller
            json.ros = (('ros' in json) ? json.ros : {});
            var ros = new ros_controller.connection(json.ros);
            // Init3D map controller
            var map3D = new Viewer.Map3D({
                ros: ros
            });
        });
    });
  </script>
  <style>
    .map canvas {
      border-radius: 14px;
      box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(204, 204, 204, .5) 0px 1px 8px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px;
    }
  </style>
</head>

<body>
<div data-role="page">
    <div data-role="panel" id="panel-config" data-theme="a" data-display="push" data-position="left" data-swipe-close="false">
      <a href="#save" class="ui-btn ui-corner-all ui-icon-action ui-btn-icon-left">Save</a>
      <div data-role="collapsible" data-iconpos="right" id="ros-server">
        <h4>Status</h4>
        <input type="url" data-clear-btn="true" name="ros-server" id="ros-url" data-mini="true" value="" placeholder="localhost">
      </div>
    </div>
    
    <div data-role="panel" id="panel-drive" data-theme="a" data-display="push" data-position="right" data-swipe-close="false">
    </div>
    
    <div data-role="header" data-theme="a" data-position-fixed="true">
        <a href="#panel-config" class="ui-btn ui-btn-left ui-icon-gear ui-btn-icon-notext ui-corner-all">Config</a>
        <a href="#panel-drive" class="ui-btn ui-btn-right ui-icon-star ui-btn-icon-notext ui-corner-all">Drive</a>
    </div>
    
    <div role="main" data-theme="a" class="ui-content">
        <div id="map-3D" class="map"></div>
        <div id="map-2D" class="map"></div>
    </div>
    
    <div data-role="footer" data-theme="a" data-position-fixed="true">
        <div data-role="controlgroup" data-type="horizontal" data-mini="true">
            <a href="#map" id="map" class="ui-btn ui-corner-all">2D</a>
            <a href="#" class="ui-btn ui-corner-all ui-icon-navigation ui-btn-icon-notext">Icon only</a>
            <a href="#" class="ui-btn ui-corner-all ui-icon-location ui-btn-icon-notext">Icon only</a>
        </div>
        
    </div>
    
</body>

</html>
